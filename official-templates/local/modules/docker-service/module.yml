# Native module for service discovery in local Docker
plugin: native
type: docker

inputs:
  name:
    type: string
    required: true
    description: Service name
  target:
    type: string
    required: true
    description: Target container or process name
  target_type:
    type: string
    required: true
    description: Target type (deployment, function)
  port:
    type: number
    required: true
    description: Service port
  protocol:
    type: string
    default: "http"
    description: Service protocol
  host:
    type: string
    default: "localhost"
    description: Host for service URL

# Services in local mode are just configuration - they define the port that deployments
# should listen on. The executor injects the PORT env var into deployments based on
# their associated service.

outputs:
  host:
    value: "${inputs.host}"
    description: Service host
  port:
    value: "${inputs.port}"
    description: Service port
  url:
    value: "${inputs.protocol}://${inputs.host}:${inputs.port}"
    description: Full service URL
