# Integration Test Environment
# Deploys the Clerk + NextJS + PostgreSQL test stack using local datacenter
#
# Usage: arcctl update environment <name> -d <datacenter> environment.yml
# Example: arcctl update environment clerk-test -d ./official-templates/local environment.yml
#
# Required environment variables:
#   CLERK_PUBLISHABLE_KEY - Clerk publishable key (pk_test_... or pk_live_...)
#   CLERK_SECRET_KEY - Clerk secret key (sk_test_... or sk_live_...)

components:
  # Clerk authentication provider (configuration passthrough)
  # Source is a file path for local development
  clerk:
    source: ../../../examples/components/clerk
    variables:
      publishable_key: ${CLERK_PUBLISHABLE_KEY}
      secret_key: ${CLERK_SECRET_KEY}

  # The test application with PostgreSQL and Clerk auth
  # Source is a file path relative to this environment.yml
  clerk-nextjs-app:
    source: .
