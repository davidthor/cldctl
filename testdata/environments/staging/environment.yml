# Environment configuration template
# Note: name and datacenter are specified via CLI flags when creating/updating
# Example: cldctl update environment staging -d local environment.yml

locals:
  base_domain: staging.example.com
  log_level: debug

components:
  # Local component - uses path to local directory
  api:
    path: ./../../components/basic
    variables:
      log_level: ${{ locals.log_level }}
    scaling:
      api:
        replicas: 2
        cpu: "0.5"
        memory: "512Mi"
    routes:
      main:
        hostnames:
          - subdomain: api
        tls:
          enabled: true

  # OCI component - uses image reference
  registry.example.com/org/worker:
    image: registry.example.com/org/worker:v1.0.0
    variables:
      log_level: info
    scaling:
      processor:
        replicas: 3
        cpu: "1"
        memory: "1Gi"
