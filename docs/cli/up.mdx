---
title: "cldctl up"
description: "Quick start command for local development"
---

# cldctl up

The `up` command provides a streamlined experience for local development. It deploys your component or environment with all dependencies to a local environment with minimal configuration.

## Synopsis

```bash
cldctl up [options]
```

## Options

| Option | Description |
|--------|-------------|
| `-c, --component <path>` | Path to component file or directory |
| `-e, --environment <path>` | Path to environment file |
| `-d, --datacenter <name>` | Target datacenter (resolved from flag, `CLDCTL_DATACENTER` env var, or CLI config default) |
| `-n, --name <name>` | Environment name (default: auto-generated) |
| `--var <key=value>` | Set a variable (repeatable) |
| `--var-file <path>` | Load variables from a file |
| `--detach` | Run in background (don't watch for changes) |
| `--no-open` | Don't open browser to application URL |
| `--port <port>` | Override the port for local access |
| `--route-subdomain <route=subdomain>` | Set route subdomain (repeatable; component mode only) |
| `--route-path-prefix <route=/path>` | Set route path prefix (repeatable; component mode only) |

## Description

The `up` command supports two modes:

### Component Mode (`-c`)

Deploys a single component from a `cld.yml` file:

1. **Parses** your `cld.yml` file
2. **Resolves** dependencies and prompts for missing variables
3. **Creates** a local development environment
4. **Provisions** all required resources (databases, etc.) in parallel
5. **Builds** and deploys your application
6. **Watches** for file changes and auto-reloads
7. **Exposes** routes for local access

### Environment Mode (`-e`)

Deploys all components defined in a `cldenv.yml` file:

1. **Parses** your `cldenv.yml` file
2. **Resolves** environment variables from OS env vars, `.env` files, and defaults
3. **Loads** all component configurations
4. **Creates** a local development environment
5. **Provisions** all resources across all components in parallel
6. **Exposes** routes for local access

### Auto-Detection

When neither `-c` nor `-e` is provided, the command auto-detects by looking in the
current directory for `cld.yml` first, then `cldenv.yml`.

## Examples

### Component Mode

```bash
# Start from current directory (auto-detect cld.yml)
cldctl up

# Specify component path
cldctl up -c ./services/api

# With variables
cldctl up -c ./my-app --var log_level=debug --var api_key=test123

# Named environment
cldctl up -c ./my-app --name my-feature-branch

# With route overrides (component mode only)
cldctl up -c ./my-app -d local \
  --route-subdomain main=cool-prefix \
  --route-path-prefix api=/v2
```

### Environment Mode

```bash
# Deploy from an environment file
cldctl up -e cldenv.yml

# Environment file in a subdirectory
cldctl up -e ./envs/dev.yml -d local

# With variable overrides
cldctl up -e cldenv.yml --var stripe_key=sk_test_123
```

### Background Mode

```bash
# Run in background without watching for changes
cldctl up --detach

# Later, stop the environment
cldctl destroy environment my-app-dev
```

## Output

When you run `cldctl up`, you'll see progress for each resource:

```
$ cldctl up -c ./my-app

Component: my-app
Datacenter: local
Environment: my-app-dev

[provision] Creating database "main"...
[provision] Creating database "cache"...
[build] Building deployment "api"...
[deploy] Starting deployment "api"...
[expose] Route "main" available at http://localhost:8080

âœ“ Application running at http://localhost:8080

Watching for changes... (Ctrl+C to stop)
```

## File Watching

In the default interactive mode, `cldctl up` watches your source files and automatically:

- **Rebuilds** container images when source files change
- **Restarts** deployments with the new images
- **Preserves** database data across restarts

The watch behavior respects `.dockerignore` and common ignore patterns.

## Automatic Dependency Deployment

In component mode, when your component declares dependencies on other components, `cldctl up` will automatically pull and deploy any that are not already present in the environment. Dependencies are resolved transitively.

If a dependency has required variables without defaults, you will be prompted to enter values:

```
Dependency "shared-db" requires the following variables:

  admin_password (Database admin password) [required]: ********
```

Dependencies already deployed in the environment are skipped.

<Card title="Automatic Dependency Deployment Guide" icon="diagram-project" href="/guides/components/dependency-deployment">
  In-depth guide on recursive dependency deployment, ephemeral environments, pass-through components, and CI/CD patterns
</Card>

## Environment Variable Resolution (Environment Mode)

When using `-e`, environment-level variables declared in the environment file are resolved
using the following priority chain (highest priority first):

1. `--var` CLI flags
2. OS environment variables
3. `.env` file chain (`.env`, `.env.local`, `.env.<name>`, `.env.<name>.local`)
4. Default values from the variable declaration

The `.env` files are loaded from the environment file's directory.

## Local Environment

The local environment uses:

- **Docker** for running containers
- **Local volumes** for database persistence
- **Port forwarding** for accessing services

Resources are cleaned up when you stop the `up` command (Ctrl+C), unless using `--detach`.

## Comparison with deploy

| Feature | `cldctl up` | `cldctl deploy component` |
|---------|-------------|---------------------------|
| Target | Local development | Any environment |
| Configuration | Minimal | Full control |
| Component mode | Single component | Single component |
| Environment mode | Multi-component via env file | N/A (use `update environment`) |
| File watching | Yes | No |
| State backend | Local only | Configurable |
| Use case | Development | Staging/Production |

## Next Steps

<CardGroup cols={2}>
  <Card title="Component Commands" icon="cube" href="/cli/component/build">
    Full component CLI reference
  </Card>
  <Card title="Developer Workflow" icon="code" href="/guides/developer-workflow">
    Best practices for development
  </Card>
</CardGroup>
