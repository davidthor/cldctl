---
title: "deploy component"
description: "Deploy a component to an environment"
---

# arcctl deploy component

Deploy a component to an environment.

<Note>
Use `arcctl deploy comp` as shorthand for `arcctl deploy component`.
</Note>

## Synopsis

```bash
arcctl deploy component <source> -e <environment> [options]
```

## Arguments

| Argument | Description |
|----------|-------------|
| `<source>` | Component source: OCI image reference, local directory, or path to architect.yml |

## Options

| Option | Description |
|--------|-------------|
| `-e, --environment <name>` | Target environment (required) |
| `-d, --datacenter <name>` | Target datacenter (resolved from flag, `ARCCTL_DATACENTER` env var, or CLI config default) |
| `--var <key=value>` | Set a component variable (repeatable) |
| `--var-file <path>` | Load variables from file |
| `--auto-approve` | Skip confirmation prompt |
| `--target <resource>` | Target specific resource (repeatable) |
| `--backend <type>` | State backend type |
| `--backend-config <key=value>` | Backend configuration |

## Source Formats

The source argument accepts three formats:

**OCI Image Reference:**

```bash
arcctl deploy component ghcr.io/myorg/web-app:v1.5.0 -e staging
```

**Local Directory:**

```bash
arcctl deploy component ./services/web-app -e staging
```

**Path to architect.yml:**

```bash
arcctl deploy component ./services/web-app/architect.yml -e staging
```

When deploying from local source, arcctl invokes the datacenter's `dockerBuild` hook to build and push container images.

## Interactive Variable Prompts

When running interactively (not in CI), arcctl will prompt you to enter values for any required variables that were not provided via `--var` or `--var-file`:

```
$ arcctl deploy component ./my-app -e staging

The following variables need values:

  api_key (Your API key) [required]: ********
  log_level (Logging verbosity): debug

Component:   my-app
Environment: staging
...
```

Sensitive variables are masked during input. In CI environments, missing required variables will cause the command to fail with an error message listing the missing variables.

## Examples

```bash
# Deploy from OCI image
arcctl deploy component ghcr.io/myorg/web-app:v1.5.0 -e staging

# Using alias
arcctl deploy comp ghcr.io/myorg/web-app:v1.5.0 -e staging

# Deploy from local source
arcctl deploy component ./services/web-app -e staging

# Deploy with variables
arcctl deploy component ghcr.io/myorg/web-app:v1.5.0 -e staging \
  --var log_level=debug \
  --var-file ./vars/staging.dcvars

# Deploy with auto-approval (CI/CD)
arcctl deploy component ghcr.io/myorg/web-app:v1.5.0 -e staging \
  --auto-approve

# Deploy with S3 backend
arcctl deploy component ghcr.io/myorg/web-app:v1.5.0 -e staging \
  --backend s3 \
  --backend-config bucket=my-arcctl-state

# Target specific resource
arcctl deploy component ghcr.io/myorg/web-app:v1.5.0 -e staging \
  --target deployment.api
```

## Execution Plan Output

```
$ arcctl deploy component ghcr.io/myorg/web-app:v1.5.0 -e staging

Component:   web-app
Environment: staging
Source:      ghcr.io/myorg/web-app:v1.5.0

Execution Plan:

  database "main" (postgres:^15)
    + create: Database "staging-web-app-main"
    
  deployment "api"
    + create: Deployment "staging-web-app-api"
    
  service "api"
    + create: Service "staging-web-app-api"
    
  route "main"
    + create: Route "staging-web-app-main"

Plan: 4 to create, 0 to update, 0 to destroy

Proceed with deployment? [Y/n]:
```

## Automatic Dependency Deployment

When a component declares dependencies on other components (via the `dependencies` field in `architect.yml`), arcctl will automatically deploy any dependencies that are not already present in the target environment. Dependencies are resolved transitively -- if dependency A depends on dependency B, both will be deployed.

```
$ arcctl deploy component ./my-app -e staging

Dependencies to deploy:
  shared-db (ghcr.io/myorg/shared-db:v1)
  auth-service (ghcr.io/myorg/auth:v2)

Component:   my-app
Environment: staging
...
```

If a dependency has required variables without defaults, arcctl will prompt you for values in interactive mode:

```
Dependency "shared-db" requires the following variables:

  admin_password (Database admin password) [required]: ********
```

In CI/CD or `--auto-approve` mode, missing dependency variables will cause the command to fail:

```
Error: cannot auto-deploy dependency "shared-db": missing required variables: admin_password
Provide values with --var or deploy the dependency manually first
```

Dependencies that are already deployed in the environment are skipped -- they are not updated automatically. To update a dependency, deploy it explicitly.

## CI/CD Usage

In CI/CD pipelines, use `--auto-approve` and provide all required variables via `--var` or `--var-file`:

```bash
arcctl deploy component ghcr.io/myorg/web-app:v1.5.0 -e staging \
  --var api_key=$API_KEY \
  --var database_url=$DATABASE_URL \
  --auto-approve
```

If required variables are missing in CI, the command will fail with an error:

```
Error: missing required variables: api_key, database_url
Use --var or --var-file to provide values, or run interactively
```

## See Also

- [`arcctl destroy component`](/cli/destroy/component) - Destroy a deployed component
- [`arcctl list component`](/cli/list/component) - List deployed components
- [`arcctl get component`](/cli/get/component) - Get component details
