---
title: "deploy datacenter"
description: "Deploy or update a datacenter"
---

# cldctl deploy datacenter

Deploy or update a datacenter.

<Note>
Use `cldctl deploy dc` as shorthand for `cldctl deploy datacenter`.
</Note>

## Synopsis

```bash
cldctl deploy datacenter <name> <config> [options]
```

## Arguments

| Argument | Description |
|----------|-------------|
| `<name>` | Name for the deployed datacenter |
| `<config>` | Datacenter config: OCI image reference or local path |

## Options

| Option | Description |
|--------|-------------|
| `--var <key=value>` | Set a datacenter variable (repeatable) |
| `--var-file <path>` | Load variables from file |
| `--auto-approve` | Skip confirmation prompt |
| `--skip-modules` | Register the datacenter without provisioning root-level modules (for import workflows) |
| `--backend <type>` | State backend type |
| `--backend-config <key=value>` | Backend configuration |

## Examples

```bash
# Deploy from OCI image
cldctl deploy datacenter prod-dc ghcr.io/myorg/dc:v1.0.0

# Using alias
cldctl deploy dc prod-dc ghcr.io/myorg/dc:v1.0.0

# Deploy from local path
cldctl deploy datacenter my-dc ./datacenter

# Deploy with variables
cldctl deploy datacenter prod-dc ghcr.io/myorg/dc:v1.0.0 \
  --var region=us-east-1 \
  --var cluster_name=production

# Deploy with auto-approval (CI/CD)
cldctl deploy datacenter prod-dc ghcr.io/myorg/dc:v1.0.0 \
  --auto-approve

# Register without provisioning (import existing infrastructure first)
cldctl deploy datacenter prod-dc ghcr.io/myorg/dc:v1.0.0 \
  --skip-modules \
  --var region=us-east-1
# Then import root modules:
#   cldctl import datacenter prod-dc --module vpc --map "aws_vpc.main=vpc-0abc123"
# Then deploy again to reconcile:
#   cldctl deploy datacenter prod-dc ghcr.io/myorg/dc:v1.0.0
```

## Execution Plan Output

Before deploying, the command generates a plan showing what changes will be made.
The plan compares the incoming datacenter configuration against the current state
to identify modules that will be created or updated, component registrations, and
environments that need reconciliation.

### First deployment (all modules are new)

```
$ cldctl deploy dc prod-dc ghcr.io/myorg/dc:v1.0.0

Root modules:
  + module/eks (opentofu)
  + module/rds-postgres (opentofu)

Plan: 2 module(s) to create, 0 to update, 0 environment(s) to reconcile

Proceed? [Y/n]:
```

### Updating an existing datacenter

```
$ cldctl deploy dc prod-dc ghcr.io/myorg/dc:v2.0.0

Root modules:
  ~ module/eks (opentofu)
      ~ region: us-east-1 → us-west-2
  ~ module/rds-postgres (opentofu)

Component registrations:
  → myorg/stripe (latest)

Environments to reconcile:
  ~ staging (3 component(s) will be re-deployed)
  ~ production (5 component(s) will be re-deployed)

Plan: 0 module(s) to create, 2 to update, 2 environment(s) to reconcile

Proceed? [Y/n]:
```

### No changes

```
$ cldctl deploy dc prod-dc ghcr.io/myorg/dc:v1.0.0

No changes. Datacenter "prod-dc" is up to date.

Proceed? [Y/n]:
```

## Importing Existing Infrastructure

When migrating existing cloud infrastructure to cldctl, use `--skip-modules` to
register the datacenter without provisioning root-level modules. This gives you
a window to import existing resources before cldctl tries to create them:

```bash
# 1. Register the datacenter (no provisioning)
cldctl deploy datacenter prod-dc ghcr.io/myorg/dc:v1.0.0 \
  --skip-modules --var region=us-east-1

# 2. Import existing root modules
cldctl import datacenter prod-dc \
  --module vpc \
  --map "aws_vpc.main=vpc-0abc123" \
  --map "aws_subnet.public[0]=subnet-aaa111"

# 3. Deploy again to reconcile (existing state is preserved)
cldctl deploy datacenter prod-dc ghcr.io/myorg/dc:v1.0.0 \
  --var region=us-east-1
```

On the second deploy, cldctl sees that the VPC module already has state (from the
import) and updates it rather than creating a new one.

<Tip>
See the [Migrating an Existing App](/guides/migrating-existing-app) guide for a
complete end-to-end walkthrough.
</Tip>

## See Also

- [`cldctl destroy datacenter`](/cli/destroy/datacenter) - Destroy a datacenter
- [`cldctl list datacenter`](/cli/list/datacenter) - List deployed datacenters
- [`cldctl get datacenter`](/cli/get/datacenter) - Get datacenter details
- [`cldctl import datacenter`](/cli/import/datacenter) - Import existing infrastructure into a datacenter module
